<script type="text/javascript">
var themePath = "/assets/themes/<%= session[:theme] -%>/";
var switchTo5x = true;<% 'for share-this' %>
if ( !window.RunCoCo ) { window.RunCoCo = {}; }
RunCoCo.siteUrl = '<%= configuration(:site_url) %>';
RunCoCo.relativeUrlRoot = '<%= configuration(:relative_url_root) %>';
RunCoCo.gaId = '<%= configuration(:google_analytics_key) %>';
RunCoCo.locale = '<%= I18n.locale %>';
<% if @contribution && @contribution.ready_to_submit? %>RunCoCo.ready_for_submit = true;<% end %>
<% if @javascripts[:translate] %>RunCoCo.bing_translate_key = '<%= configuration(:bing_translate_key) %>';<% end %>
<% if @attachment %>RunCoCo.contribution = { title: '<%= @attachment.contribution.title.gsub("'", "\\\\'") %>', metadata: <%= raw metadata_json(@attachment.contribution) %> };<% end %>
<% if @javascripts[:uploadify] && configuration(:uploadify) -%>
RunCoCo.uploadify_settings = { maxUploadSize: <%= configuration(:max_upload_size) %>, fileExt: '<%= uploadify_file_extensions %>', fileDesc: '<%= uploadify_file_desc %>', script: '<%= contribution_attachments_path(@contribution) %>' };
RunCoCo.authenticityToken = '<%= form_authenticity_token if protect_against_forgery? %>';
RunCoCo.sessionKeyName = '<%= session_key_name %>';
RunCoCo.sessionKey = '<%= cookies[session_key_name] %>';
<% end -%>
<% if 'cataloguer' === current_user.role.name -%>
RunCoCo.cataloguer = true;
<% end -%>
</script>
<%- if @javascripts[:translate] -%>
  <%= theme_javascript_include_tag 'translator' -%>
<%- end -%>
<%= theme_javascript_include_tag 'application' %>
<%- if configuration(:gmap_api_key).present? && @javascripts[:gmap] -%>
  <%= javascript_include_tag "http://maps.googleapis.com/maps/api/js?&sensor=false&libraries=places&key=" + configuration(:gmap_api_key).to_s %>
  <%= theme_javascript_include_tag 'gmap' %>
<%- end -%>
<%- if configuration(:uploadify) && @javascripts[:uploadify] -%>
  <%= theme_javascript_include_tag 'uploadify' %>
<%- end -%>
<%- if @javascripts[:shares] -%>
  <%= javascript_include_tag '//w.sharethis.com/button/buttons.js' %>
<% end -%>
<%- if @javascripts[:lightbox] -%>
  <%= theme_javascript_include_tag 'com/jquery/plugins/jquery.prettyphoto.js' %>
<%- end -%>
<%- if @javascripts[:video] || @javascripts[:audio] -%>
  <%= javascript_include_tag 'themes/common/mediaelement/mediaelement-and-player.min.js' -%>
<%- end -%>
<%- if @javascripts[:annotorious] -%>
  <%= javascript_include_tag 'themes/common/ait/annotorious/annotorious.dev.js' -%>
  <%= theme_javascript_include_tag 'eu/europeana/annotorious.runcoco.js' %>
<%- end -%>
<script>I18n.locale = '<%= I18n.locale %>';</script><% 'need this here because loading I18n will overwrite if value is set before load' -%>
<script>
if ( window.stLight ) { stLight.options({publisher : '<%= configuration(:sharethis_id) %>'}); } <% 'for share-this' %>
if ( ( /iPad/.test( navigator.platform ) && navigator.userAgent.indexOf( "AppleWebKit" ) > -1 ) ) { jQuery('.remix').hide(); }
</script>
<% if @javascripts[:page].present? -%>
  <%= theme_javascript_include_tag "eu/europeana/pages/" + @javascripts[:page] %>
<% end -%>
